{"ast":null,"code":"var _class;\nimport { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class CartapiService {\n  constructor(http) {\n    this.http = http;\n    this.cartDataList = JSON.parse(localStorage.getItem('ECart') || '[]');\n    this.productList = new BehaviorSubject([]);\n    this.search = new BehaviorSubject(\"\");\n  }\n  getProduct() {\n    this.productList.next(this.cartDataList);\n    return this.productList.asObservable();\n  }\n  setProduct(product) {\n    this.cartDataList.push(...product);\n    this.productList.next(product);\n  }\n  addToCart(product) {\n    this.cartDataList.push(product);\n    this.productList.next(this.cartDataList);\n    this.getTotalAmount();\n    console.log(this.cartDataList);\n    localStorage.setItem('ECart', JSON.stringify(this.cartDataList));\n  }\n  getTotalAmount() {\n    let grandTotal = 0;\n    this.cartDataList.map(a => {\n      grandTotal += a.total;\n    });\n    return grandTotal;\n  }\n  removeCartData(product) {\n    this.cartDataList.map((a, index) => {\n      if (product.id === a.id) {\n        this.cartDataList.splice(index, 1);\n      }\n    });\n    localStorage.setItem('ECart', JSON.stringify(this.cartDataList));\n    this.productList.next(this.cartDataList);\n  }\n  removeAllCart() {\n    this.cartDataList = [];\n    localStorage.setItem('ECart', JSON.stringify(this.cartDataList));\n    this.productList.next(this.cartDataList);\n  }\n}\n_class = CartapiService;\n_class.ɵfac = function CartapiService_Factory(t) {\n  return new (t || _class)(i0.ɵɵinject(i1.HttpClient));\n};\n_class.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: _class,\n  factory: _class.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"names":["BehaviorSubject","CartapiService","constructor","http","cartDataList","JSON","parse","localStorage","getItem","productList","search","getProduct","next","asObservable","setProduct","product","push","addToCart","getTotalAmount","console","log","setItem","stringify","grandTotal","map","a","total","removeCartData","index","id","splice","removeAllCart","i0","ɵɵinject","i1","HttpClient","factory","ɵfac","providedIn"],"sources":["C:\\angular\\Shopping Cart\\E-Cart\\src\\app\\services\\cartapi.service.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs'\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CartapiService {\r\n  cartDataList: any = JSON.parse(localStorage.getItem('ECart') || '[]');\r\n  productList = new BehaviorSubject<any>([]);\r\n  search = new BehaviorSubject<string>(\"\");\r\n  \r\n  constructor(private http: HttpClient) { }\r\n  getProduct() {\r\n    this.productList.next(this.cartDataList);\r\n    return this.productList.asObservable();\r\n  }\r\n  setProduct(product: any) {\r\n\r\n    this.cartDataList.push(...product);\r\n    this.productList.next(product)\r\n  }\r\n  addToCart(product: any) {\r\n    this.cartDataList.push(product);\r\n    this.productList.next(this.cartDataList);\r\n    this.getTotalAmount();\r\n    console.log(this.cartDataList);\r\n    localStorage.setItem('ECart', JSON.stringify(this.cartDataList))\r\n\r\n  }\r\n  getTotalAmount():number{\r\n    let grandTotal =0;\r\n    this.cartDataList.map((a:any)=>{\r\n      grandTotal += a.total;\r\n    })\r\n    return grandTotal\r\n  }\r\n  removeCartData(product:any){\r\n     this.cartDataList.map((a:any, index:any)=>{\r\n      if(product.id === a.id){\r\n        this.cartDataList.splice(index,1)\r\n      }\r\n     })\r\n    localStorage.setItem('ECart', JSON.stringify(this.cartDataList))\r\n     this.productList.next(this.cartDataList)\r\n    }   \r\n  removeAllCart(){\r\n   this.cartDataList =[];\r\n   localStorage.setItem('ECart', JSON.stringify(this.cartDataList))\r\n   this.productList.next(this.cartDataList) \r\n  }\r\n}\r\n"],"mappings":";AAEA,SAASA,eAAe,QAAQ,MAAM;;;AAItC,OAAM,MAAOC,cAAc;EAKzBC,YAAoBC,IAAgB;IAAhB,KAAAA,IAAI,GAAJA,IAAI;IAJxB,KAAAC,YAAY,GAAQC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC;IACrE,KAAAC,WAAW,GAAG,IAAIT,eAAe,CAAM,EAAE,CAAC;IAC1C,KAAAU,MAAM,GAAG,IAAIV,eAAe,CAAS,EAAE,CAAC;EAEA;EACxCW,UAAUA,CAAA;IACR,IAAI,CAACF,WAAW,CAACG,IAAI,CAAC,IAAI,CAACR,YAAY,CAAC;IACxC,OAAO,IAAI,CAACK,WAAW,CAACI,YAAY,EAAE;EACxC;EACAC,UAAUA,CAACC,OAAY;IAErB,IAAI,CAACX,YAAY,CAACY,IAAI,CAAC,GAAGD,OAAO,CAAC;IAClC,IAAI,CAACN,WAAW,CAACG,IAAI,CAACG,OAAO,CAAC;EAChC;EACAE,SAASA,CAACF,OAAY;IACpB,IAAI,CAACX,YAAY,CAACY,IAAI,CAACD,OAAO,CAAC;IAC/B,IAAI,CAACN,WAAW,CAACG,IAAI,CAAC,IAAI,CAACR,YAAY,CAAC;IACxC,IAAI,CAACc,cAAc,EAAE;IACrBC,OAAO,CAACC,GAAG,CAAC,IAAI,CAAChB,YAAY,CAAC;IAC9BG,YAAY,CAACc,OAAO,CAAC,OAAO,EAAEhB,IAAI,CAACiB,SAAS,CAAC,IAAI,CAAClB,YAAY,CAAC,CAAC;EAElE;EACAc,cAAcA,CAAA;IACZ,IAAIK,UAAU,GAAE,CAAC;IACjB,IAAI,CAACnB,YAAY,CAACoB,GAAG,CAAEC,CAAK,IAAG;MAC7BF,UAAU,IAAIE,CAAC,CAACC,KAAK;IACvB,CAAC,CAAC;IACF,OAAOH,UAAU;EACnB;EACAI,cAAcA,CAACZ,OAAW;IACvB,IAAI,CAACX,YAAY,CAACoB,GAAG,CAAC,CAACC,CAAK,EAAEG,KAAS,KAAG;MACzC,IAAGb,OAAO,CAACc,EAAE,KAAKJ,CAAC,CAACI,EAAE,EAAC;QACrB,IAAI,CAACzB,YAAY,CAAC0B,MAAM,CAACF,KAAK,EAAC,CAAC,CAAC;;IAEpC,CAAC,CAAC;IACHrB,YAAY,CAACc,OAAO,CAAC,OAAO,EAAEhB,IAAI,CAACiB,SAAS,CAAC,IAAI,CAAClB,YAAY,CAAC,CAAC;IAC/D,IAAI,CAACK,WAAW,CAACG,IAAI,CAAC,IAAI,CAACR,YAAY,CAAC;EACzC;EACF2B,aAAaA,CAAA;IACZ,IAAI,CAAC3B,YAAY,GAAE,EAAE;IACrBG,YAAY,CAACc,OAAO,CAAC,OAAO,EAAEhB,IAAI,CAACiB,SAAS,CAAC,IAAI,CAAClB,YAAY,CAAC,CAAC;IAChE,IAAI,CAACK,WAAW,CAACG,IAAI,CAAC,IAAI,CAACR,YAAY,CAAC;EACzC;;SA3CWH,cAAc;;mBAAdA,MAAc,EAAA+B,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA;AAAA;;SAAdlC,MAAc;EAAAmC,OAAA,EAAdnC,MAAc,CAAAoC,IAAA;EAAAC,UAAA,EAFb;AAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}