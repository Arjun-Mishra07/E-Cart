{"ast":null,"code":"var _class;\nimport { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class CartapiService {\n  constructor(http) {\n    this.http = http;\n    this.cartDataList = [];\n    this.productList = new BehaviorSubject([]);\n    this.search = new BehaviorSubject(\"\");\n  }\n  getProduct() {\n    return this.productList.asObservable();\n  }\n  setProduct(product) {\n    this.cartDataList.push(...product);\n    this.productList.next(product);\n  }\n  addToCart(product) {\n    this.cartDataList.push(product);\n    this.productList.next(this.cartDataList);\n    this.getTotalAmount();\n    console.log(this.cartDataList);\n  }\n  getTotalAmount() {\n    let grandTotal = 0;\n    this.cartDataList.map(a => {\n      grandTotal += a.total;\n    });\n    return grandTotal;\n  }\n  removeCartData(product) {\n    this.cartDataList.map((a, index) => {\n      if (product.id === a.id) {\n        this.cartDataList.splice(index, 1);\n      }\n    });\n    this.productList.next(this.cartDataList);\n  }\n  removeAllCart() {\n    this.cartDataList = [];\n    this.productList.next(this.cartDataList);\n  }\n}\n_class = CartapiService;\n_class.ɵfac = function CartapiService_Factory(t) {\n  return new (t || _class)(i0.ɵɵinject(i1.HttpClient));\n};\n_class.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: _class,\n  factory: _class.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"names":["BehaviorSubject","CartapiService","constructor","http","cartDataList","productList","search","getProduct","asObservable","setProduct","product","push","next","addToCart","getTotalAmount","console","log","grandTotal","map","a","total","removeCartData","index","id","splice","removeAllCart","i0","ɵɵinject","i1","HttpClient","factory","ɵfac","providedIn"],"sources":["C:\\angular\\Shopping Cart\\E-Cart\\src\\app\\services\\cartapi.service.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs'\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CartapiService {\r\n  cartDataList: any = [];\r\n  productList = new BehaviorSubject<any>([]);\r\n  search = new BehaviorSubject<string>(\"\");\r\n  constructor(private http: HttpClient) { }\r\n  getProduct() {\r\n    return this.productList.asObservable();\r\n  }\r\n  setProduct(product: any) {\r\n    this.cartDataList.push(...product);\r\n    this.productList.next(product)\r\n  }\r\n  addToCart(product: any) {\r\n    this.cartDataList.push(product);\r\n    this.productList.next(this.cartDataList);\r\n    this.getTotalAmount();\r\n    console.log(this.cartDataList)\r\n  }\r\n  getTotalAmount():number{\r\n    let grandTotal =0;\r\n    this.cartDataList.map((a:any)=>{\r\n      grandTotal += a.total;\r\n    })\r\n    return grandTotal\r\n  }\r\n  removeCartData(product:any){\r\n     this.cartDataList.map((a:any, index:any)=>{\r\n      if(product.id === a.id){\r\n        this.cartDataList.splice(index,1)\r\n      }\r\n     })\r\n     this.productList.next(this.cartDataList)\r\n    }   \r\n  removeAllCart(){\r\n   this.cartDataList =[]\r\n   this.productList.next(this.cartDataList) \r\n  }\r\n}\r\n"],"mappings":";AAEA,SAASA,eAAe,QAAQ,MAAM;;;AAItC,OAAM,MAAOC,cAAc;EAIzBC,YAAoBC,IAAgB;IAAhB,KAAAA,IAAI,GAAJA,IAAI;IAHxB,KAAAC,YAAY,GAAQ,EAAE;IACtB,KAAAC,WAAW,GAAG,IAAIL,eAAe,CAAM,EAAE,CAAC;IAC1C,KAAAM,MAAM,GAAG,IAAIN,eAAe,CAAS,EAAE,CAAC;EACA;EACxCO,UAAUA,CAAA;IACR,OAAO,IAAI,CAACF,WAAW,CAACG,YAAY,EAAE;EACxC;EACAC,UAAUA,CAACC,OAAY;IACrB,IAAI,CAACN,YAAY,CAACO,IAAI,CAAC,GAAGD,OAAO,CAAC;IAClC,IAAI,CAACL,WAAW,CAACO,IAAI,CAACF,OAAO,CAAC;EAChC;EACAG,SAASA,CAACH,OAAY;IACpB,IAAI,CAACN,YAAY,CAACO,IAAI,CAACD,OAAO,CAAC;IAC/B,IAAI,CAACL,WAAW,CAACO,IAAI,CAAC,IAAI,CAACR,YAAY,CAAC;IACxC,IAAI,CAACU,cAAc,EAAE;IACrBC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACZ,YAAY,CAAC;EAChC;EACAU,cAAcA,CAAA;IACZ,IAAIG,UAAU,GAAE,CAAC;IACjB,IAAI,CAACb,YAAY,CAACc,GAAG,CAAEC,CAAK,IAAG;MAC7BF,UAAU,IAAIE,CAAC,CAACC,KAAK;IACvB,CAAC,CAAC;IACF,OAAOH,UAAU;EACnB;EACAI,cAAcA,CAACX,OAAW;IACvB,IAAI,CAACN,YAAY,CAACc,GAAG,CAAC,CAACC,CAAK,EAAEG,KAAS,KAAG;MACzC,IAAGZ,OAAO,CAACa,EAAE,KAAKJ,CAAC,CAACI,EAAE,EAAC;QACrB,IAAI,CAACnB,YAAY,CAACoB,MAAM,CAACF,KAAK,EAAC,CAAC,CAAC;;IAEpC,CAAC,CAAC;IACF,IAAI,CAACjB,WAAW,CAACO,IAAI,CAAC,IAAI,CAACR,YAAY,CAAC;EACzC;EACFqB,aAAaA,CAAA;IACZ,IAAI,CAACrB,YAAY,GAAE,EAAE;IACrB,IAAI,CAACC,WAAW,CAACO,IAAI,CAAC,IAAI,CAACR,YAAY,CAAC;EACzC;;SApCWH,cAAc;;mBAAdA,MAAc,EAAAyB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA;AAAA;;SAAd5B,MAAc;EAAA6B,OAAA,EAAd7B,MAAc,CAAA8B,IAAA;EAAAC,UAAA,EAFb;AAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}